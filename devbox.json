{
  "$schema": "https://raw.githubusercontent.com/jetify-com/devbox/0.13.6/.schema/devbox.schema.json",
  "packages": {
    "go": {
      "version": "1.23.0",
      "output": ["dev"]
    },
    "postgresql": {
      "version": "latest"
    },
    "go-swag": {
      "version": "1.8.12"
    },
    "go-migrate": {
      "version": "latest"
    }
  },
  "env_from": "./.env",
  "shell": {
    "scripts": {
      "test": ["echo \"Error: no test specified\" && exit 1"],
      "server": ["go run ./cmd/server/main.go"],
      "migrate-up": [
        "echo 'Migrating PostgreSQL databases...'",
        "migrate -path ./migrations/schema -database postgres://$DB_USER:$DB_PASS@$DB_HOST:$DB_PORT/$DB_NAME?sslmode=$DB_SSL_MODE up",
        "echo 'PostgreSQL databases migrated successfully'"
      ],
      "migrate-down": [
        "echo 'Rolling back PostgreSQL migration...'",
        "migrate -path ./migrations/schema -database postgres://$DB_USER:$DB_PASS@$DB_HOST:$DB_PORT/$DB_NAME?sslmode=$DB_SSL_MODE down -all",
        "echo 'PostgreSQL migration rollback completed successfully'"
      ]
    }
  }
}
